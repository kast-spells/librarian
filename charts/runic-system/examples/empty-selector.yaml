# Empty Selector Example
# Tests runicIndexer behavior when selector is empty (no labels to match)
# Should use default fallback instead of matching ALL gateways

chapter:
  name: staging

# Lexicon with multiple gateways
lexicon:
  external-gateway:
    type: istio-gw
    labels:
      access: external
    gateway: istio-system/external-gateway
    baseURL: external.example.com

  internal-gateway:
    type: istio-gw
    labels:
      access: internal
    gateway: istio-system/internal-gateway
    baseURL: int.example.com

  book-default:
    type: istio-gw
    labels:
      default: book
    gateway: istio-system/book-default
    baseURL: default.example.com

  chapter-default:
    type: istio-gw
    labels:
      default: chapter
    chapter: staging
    gateway: istio-system/chapter-default
    baseURL: chapter.example.com

# Expected result: chapter-default (NOT all gateways!)
# Empty selector should NOT match all gateways
# Should fall back to chapter default first, then book default
# chapter-default: EXPECTED - default=chapter AND chapter=staging
# book-default: FALLBACK - default=book (but chapter default takes precedence)
# external-gateway: EXCLUDED - should NOT be included
# internal-gateway: EXCLUDED - should NOT be included

glyphs:
  istio:
    test-no-selector:
      type: virtualService
      enabled: true
      # No selector defined - should use default fallback
      subdomain: no-selector
      httpRules:
        - prefix: /
          port: 8080
